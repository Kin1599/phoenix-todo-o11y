<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>🔍 O11ySheet Platform</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>🔍 O11ySheet Platform</h1>

    <div class="section green">
      <h2>🚀 Основные сервисы</h2>
      <div class="grid">
        <a data-path=":4000/swagger/index.html#/" class="card">📄 TodoTask Swagger</a>
        <a data-path=":8081" class="card">🔥 Load Generator</a>
        <a data-path=":4000/api/ping" class="card">💚 Health Check</a>
      </div>

      <div class="accordion">
        <button onclick="toggleMetrics()">📊 Prometheus Metrics ▼</button>
        <div id="metrics-list" class="hidden">
          <div class="metrics-grid">
            <a data-path=":4000/metrics" class="metric-card">
              <span>📦</span>
              <strong>todo_task_manager</strong><br><small>(elixir)</small>
            </a>
            <a data-path=":8081/metrics" class="metric-card">
              <span>🚀</span>
              <strong>load-generator</strong>
            </a>
            <a data-path=":8080/_status/vars" class="metric-card">
              <span>🗃️</span>
              <strong>cockroachdb</strong>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="section blue">
      <h2>📊 Мониторинг и Алерты</h2>
      <div class="grid">
        <a data-path=":3000" class="card">📉 Grafana</a>
        <a data-path=":9090/query" class="card">📡 Prometheus</a>
        <a data-path=":9093/#/alerts" class="card">🚨 Alertmanager</a>
        <a data-path=":16686" class="card">🧵 Jaeger Tracing</a>
      </div>
    </div>

    <div class="section yellow">
      <h2>🧭 Администрирование</h2>
      <div class="grid">
        <a data-path=":8080/#/overview/list" class="card">🛢️ Cockroach Admin</a>
        <a data-path=":9000" class="card">⚓ Portainer</a>
      </div>
    </div>
  </div>

  <footer>
    <p>📚 Документация: <a href="https://github.com/Kin1599/phoenix-todo-o11y/blob/main/README.md" target="_blank">README</a></p>
  </footer>

  <script>
    const BASE_URL = "http://localhost";

    window.onload = function () {
      document.querySelectorAll('a[data-path]').forEach(a => {
        const path = a.getAttribute('data-path');
        a.href = BASE_URL + path;
        a.target = "_blank";
      });
    };

    function toggleMetrics() {
      document.getElementById("metrics-list").classList.toggle("hidden");
    }
  </script>
</body>
</html>
